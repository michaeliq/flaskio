<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title> SocketIO </title>
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style_input.css')}}">
</head>
<body>
	<div class="form__group">
		<div class="container__input">
			<h1> Hola <span id="nombreUsuario">...</span> </h1>
			<input type='text' id='myMessage' class="form__field" placeholder="inserta tu mensaje">
			<button type='button' id='send'>Send</button>
		</div>

		<div class="container__list">
			<ul id="messages" class="form__list"></ul>
		</div>
	</div>
	

	<script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js" charset="utf-8"></script>
	<script>
		const socket = io();
		const nombreUsuario = window.prompt('Cual es tu nombre?', 'invitado');
		
		document.getElementById('nombreUsuario').innerHTML = nombreUsuario;

		$('#send').on('click', function(){
			socket.send($('#myMessage').val());
			$('#myMessage').val('')
		});

		socket.on('message', function(msg){
			$('#messages').append('<li>' + msg + '</li>');
		});

	</script>
</body>
</html>
